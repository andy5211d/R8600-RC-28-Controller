RC‑28 HID Protocol Specification
Version 1.2 — January 2026  
Author: Andy

Table of Contents
Overview
USB Identification
HID Output Reports
LED Bitmask
HID Input Reports
Encoder Movement
Button Events
Report ID Summary
Safety Notes
Implementation Notes
Appendix A — LED Bitmask Diagram
Appendix B — Input Report Flowchart

Overview
The Icom RC‑28 is a USB HID device providing:
A rotary encoder (CW/CCW)
Three momentary buttons (TX, F1, F2)
Four LEDs (Link, F1, F2, Tx)

This document describes the reverse‑engineered HID protocol, including all known input and output report formats.

USB Identification
Field	Value
Vendor ID	0x0C26
Product ID	0x001E
Device Class	HID (Vendor‑specific)
HID Output Reports (Host → RC‑28)
Report ID 0x01 — LED Control
The RC‑28 accepts a 9‑byte output report:

Code
Byte 0 : Report ID (0x01)
Byte 1 : LED bitmask
Bytes 2–8 : Reserved (0x00)

LED Bitmask
Bit	Hex	  LED
0	  0x01	Unused (no visible LED)
1	  0x02	F2 LED
2	  0x04	F1 LED
3	  0x08	Tx LED
4	  0x10	Link LED
5	  0x20	All‑LED override
6	  0x40	Unused
7	  0x80	Unused

Behaviour Notes
Bits 1–4 directly control the four visible LEDs.
Bit 5 (0x20) forces all LEDs ON, regardless of other bits.
Bit 0 (0x01) has no visible effect.
Bits 6–7 unused.
LED mask is absolute, not toggle‑based.
HID Input Reports (RC‑28 → Host)
The RC‑28 uses two input report IDs:
0x00 → encoder movement
0x01 → button events

Encoder Movement
Report ID: 0x00  
Byte 3 contains the direction code:
Code
0x01 = CW
0x02 = CCW
No acceleration or multi‑step values observed.

Button Events
Report ID: 0x01  
Byte 5 contains the button state code.

Corrected Button Behaviour
The RC‑28 does not send a multi‑button bitmask.

Instead:
Each button sends a unique code when pressed
All buttons send the same code when released
This matches the behaviour in your RC28Comm decoder.

Button State Codes (active‑low)
Button	Press Condition	Release Condition
TX	(buttons & 0x01) == 0	(buttons == 0xFF)
F1	(buttons & 0x02) == 0	(buttons == 0xFF)
F2	(buttons & 0x04) == 0	(buttons == 0xFF)

Important Notes
Only one button can be active at a time.
Pressing a button clears its bit.
Releasing any button sets all bits high (0xFF).
No combination presses are reported.

Long‑press behaviour is implemented in software, not hardware.

Report ID Summary
Report ID	Direction	Purpose
0x00	Input	Encoder delta (CW/CCW)
0x01	Input	Button events (TX, F1, F2)
0x01	Output	LED control
0x02–0x06	Output	No visible effect
0x07	Output	Unknown (avoid)
0x08–0x0F	Output	No observed effect

Safety Notes
Avoid Report ID 0x07 (likely DFU/firmware).
Always send 9‑byte output reports.
Reserved bytes must be zero.
LED mask is absolute.

Implementation Notes
hid4java requires the report ID in byte 0.
Reflection recommended for write() compatibility
Input reports must be polled.
Button handling must treat 0xFF as release.

Appendix A — LED Bitmask Diagram
Code
+------------------------------------------------------+
|                RC‑28 LED Bitmask (Byte 1)            |
+---------+---------+---------+---------+--------------+
| Bit 7   | Bit 6   | Bit 5   | Bit 4   | Bit 3        |
| 0x80    | 0x40    | 0x20    | 0x10    | 0x08         |
| unused  | unused  | ALL ON  | Link    | Tx           |
+---------+---------+---------+---------+--------------+
| Bit 2   | Bit 1   | Bit 0             |
| 0x04    | 0x02    | 0x01              |
| F1      | F2      | unused            |
+---------------------------------------+

Appendix B — Input Report Flowchart
Code
                   +----------------------+
                   |  Receive HID Report  |
                   +----------+-----------+
                              |
                              v
                 +---------------------------+
                 |  Report ID == 0x00 ?      |
                 +-----------+---------------+
                             | Yes
                             v
                 +---------------------------+
                 |   Read buffer[3]          |
                 |   0x01 = CW               |
                 |   0x02 = CCW              |
                 +-----------+---------------+
                             |
                             v
                 |   Emit knob event         |
                             |
                           (End)

                             |
                             | No
                             v

                 +---------------------------+
                 |  Report ID == 0x01 ?      |
                 +-----------+---------------+
                             | Yes
                             v
                 +---------------------------+
                 |   Read buffer[5]          |
                 |   TX = bit0 cleared       |
                 |   F1 = bit1 cleared       |
                 |   F2 = bit2 cleared       |
                 |   Release = 0xFF          |
                 +-----------+---------------+
                             |
                             v
                 |   Emit button event       |
                             |
                           (End)
